{"version":3,"sources":["webpack:///src/views/edit.vue","webpack:///./src/api/edit.js","webpack:///./src/views/edit.vue?d3b9","webpack:///./src/views/edit.vue"],"names":["edit","name","data","feelling","placeholder","maxlength","autofocus","methods","goback","_this","this","length","$createDialog","type","content","confirmBtn","text","active","disabled","href","cancelBtn","onCancel","$router","go","onConfirm","show","_pulish","_this2","keys_default","positions","address","addressComponent","params","fetch","post","addMemory","lng","position","R","lat","Q","province","district","street","streetNumber","then","res","$createToast","txt","time","push","path","catch","e","console","log","message","computed","extends_default","Object","vuex_esm","views_edit","render","_vm","_h","$createElement","_c","_self","staticClass","on","click","_v","staticStyle","color","attrs","outline","model","value","callback","$$v","expression","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"oLAwBA,IAAAA,GACAC,KAAA,OACAC,KAFA,WAGA,OACAC,SAAA,GACAC,YAAA,gBACAC,UAAA,IACAC,WAAA,IAGAC,SACAC,OADA,WACA,IAAAC,EAAAC,KACAA,KAAAP,SAAAQ,OAAA,EACAD,KAAAE,eACAC,KAAA,UACAC,QAAA,YACAC,YACAC,KAAA,IACAC,QAAA,EACAC,UAAA,EACAC,KAAA,gBAEAC,WACAJ,KAAA,IACAC,QAAA,EACAC,UAAA,EACAC,KAAA,gBAEAE,SAAA,WACAZ,EAAAN,SAAA,GACAM,EAAAa,QAAAC,IAAA,IAEAC,UAAA,WACAf,EAAAa,QAAAC,IAAA,MAEAE,OAGAf,KAAAY,QAAAC,IAAA,IAEAG,QA9BA,WA8BA,IAAAC,EAAAjB,KACA,OAAAkB,IAAAlB,KAAAmB,WAAAlB,OAAA,CAMA,IAAAmB,EAAApB,KAAAmB,UAAAE,kBCvEO,SAAoBC,GACzB,OAAOC,MAAMC,KAAK,oBAAqBF,ID6EnCG,EALNrB,QAAAJ,KAAAP,SACAiC,IAAA1B,KAAAmB,UAAAQ,SAAA3B,KAAAmB,UAAAQ,SAAAC,EAAA,GACAC,IAAA7B,KAAAmB,UAAAQ,SAAA3B,KAAAmB,UAAAQ,SAAAG,EAAA,GACAV,UAAAW,SAAAX,EAAAY,SAAAZ,EAAAa,OAAAb,EAAAc,eAEAC,KAAA,SAAAC,GACAnB,EAAAoB,cACAC,IAAA,OACAC,KAAA,IACApC,KAAA,YACAY,OACAE,EAAAxB,SAAA,GACAwB,EAAAL,QAAA4B,MACAC,KAAA,QAEAC,MAAA,SAAAC,GACAC,QAAAC,IAAAF,GACA1B,EAAAoB,cACAC,IAAAK,EAAAG,QACAP,KAAA,IACApC,KAAA,UACAY,cA5BAf,KAAAqC,cACAC,IAAA,mBACAvB,SA8BAgC,SAAYC,OACZC,OAAAC,EAAA,EAAAD,EACA,gBEjGeE,GADEC,OAFjB,WAA0B,IAAAC,EAAArD,KAAasD,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,SAAmBF,EAAA,OAAYE,YAAA,aAAuBF,EAAA,OAAYE,YAAA,WAAqBF,EAAA,QAAaE,YAAA,cAAAC,IAA8BC,MAAAP,EAAAvD,YAAoBuD,EAAAQ,GAAA,KAAAL,EAAA,OAA0BE,YAAA,WAAqBF,EAAA,eAAoBM,aAAaC,MAAA,WAAkBC,OAAQ7D,KAAA,SAAA8D,SAAA,EAAAzD,SAAA,IAAA6C,EAAA5D,SAAAQ,QAAoE0D,IAAKC,MAAAP,EAAArC,WAAqBqC,EAAAQ,GAAA,cAAAR,EAAAQ,GAAA,KAAAL,EAAA,OAA6CE,YAAA,iBAA2BF,EAAA,iBAAsBQ,OAAOtE,YAAA2D,EAAA3D,YAAAC,UAAA0D,EAAA1D,UAAAC,UAAAyD,EAAAzD,WAAkFsE,OAAQC,MAAAd,EAAA,SAAAe,SAAA,SAAAC,GAA8ChB,EAAA5D,SAAA4E,GAAiBC,WAAA,eAAwB,MAE7sBC,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEpF,EACA6D,GATF,EAVA,SAAAwB,GACEF,EAAQ,SAaV,KAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"assets/js/6.56e371f81262f5d15797.js","sourcesContent":["<template>\r\n<div class=\"Edit\">\r\n  <div class=\"nav flex\">\r\n    <div class=\"flex-1\">\r\n      <span class=\"cubeic-back\" @click='goback'></span>\r\n    </div>\r\n    <div class=\"flex-1\">\r\n      <cube-button type='button' style='color: #07CBFC;' :outline='true' :disabled='feelling.length === 0' @click='_pulish'>发布</cube-button>\r\n    </div>\r\n  </div>\r\n  <div class=\"edit-wrapper\">\r\n    <cube-textarea\r\n      v-model=\"feelling\"\r\n      :placeholder=\"placeholder\"\r\n      :maxlength=\"maxlength\"\r\n      :autofocus=\"autofocus\">\r\n    </cube-textarea>\r\n  </div>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from 'vuex'\r\nimport { addMemory } from '@/api/edit'\r\nexport default {\r\n  name: 'Edit',\r\n  data () {\r\n    return {\r\n      feelling: '',\r\n      placeholder: '写给未来的自己......',\r\n      maxlength: 100,\r\n      autofocus: true\r\n    }\r\n  },\r\n  methods: {\r\n    goback () {\r\n      if (this.feelling.length > 0) {\r\n        this.$createDialog({\r\n          type: 'confirm',\r\n          content: '是否保存当前信息？',\r\n          confirmBtn: {\r\n            text: '是',\r\n            active: true,\r\n            disabled: false,\r\n            href: 'javascript:;'\r\n          },\r\n          cancelBtn: {\r\n            text: '否',\r\n            active: false,\r\n            disabled: false,\r\n            href: 'javascript:;'\r\n          },\r\n          onCancel: () => {\r\n            this.feelling = ''\r\n            this.$router.go(-1)\r\n          },\r\n          onConfirm: () => {\r\n            this.$router.go(-1)\r\n          }\r\n        }).show()\r\n        return\r\n      }\r\n      this.$router.go(-1)\r\n    },\r\n    _pulish () {\r\n      if (Object.keys(this.positions).length === 0) {\r\n        this.$createToast({\r\n          txt: '未获取定位信息,不能发布动态'\r\n        }).show()\r\n        return\r\n      }\r\n      let address = this.positions.addressComponent\r\n      var params = {\r\n        content: this.feelling,\r\n        lng: this.positions.position ? this.positions.position.R : '',\r\n        lat: this.positions.position ? this.positions.position.Q : '',\r\n        address: address.province + address.district + address.street + address.streetNumber\r\n      }\r\n      addMemory(params).then(res => {\r\n        this.$createToast({\r\n          txt: '发布成功',\r\n          time: 2000,\r\n          type: 'correct'\r\n        }).show()\r\n        this.feelling = ''\r\n        this.$router.push({\r\n          path: '/'\r\n        })\r\n      }).catch(e => {\r\n        console.log(e)\r\n        this.$createToast({\r\n          txt: e.message,\r\n          time: 2000,\r\n          type: 'error'\r\n        }).show()\r\n      })\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'positions'\r\n    ])\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n  .Edit{\r\n    .edit-wrapper{\r\n      margin-top: 20px;\r\n      textarea{\r\n        outline: none;\r\n      }\r\n      .cube-textarea-wrapper:after{\r\n        border: none;\r\n      }\r\n      .cube-textarea_active:after{\r\n        border: none;\r\n      }\r\n    }\r\n    .nav{\r\n      height: 50px;\r\n      border-bottom: 1px solid #ddd;\r\n      >div{\r\n        line-height: 50px;\r\n        span{\r\n          display: block;\r\n          width: 40px;\r\n          height: 100%;\r\n          text-align: center;\r\n        }\r\n      }\r\n      >div:last-of-type{\r\n        text-align: right;\r\n        button{\r\n          display: inline-block !important;\r\n          width: auto;\r\n          height: 100%;\r\n          padding: 0 20px;\r\n          color: #FF8000;\r\n        }\r\n        .cube-btn_disabled{\r\n          background: none;\r\n          opacity: 0.5;\r\n        }\r\n        button:after{\r\n          border: none;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/edit.vue","export function addMemory (params) {\r\n  return fetch.post('/memory/addMemory', params)\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/edit.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"Edit\"},[_c('div',{staticClass:\"nav flex\"},[_c('div',{staticClass:\"flex-1\"},[_c('span',{staticClass:\"cubeic-back\",on:{\"click\":_vm.goback}})]),_vm._v(\" \"),_c('div',{staticClass:\"flex-1\"},[_c('cube-button',{staticStyle:{\"color\":\"#07CBFC\"},attrs:{\"type\":\"button\",\"outline\":true,\"disabled\":_vm.feelling.length === 0},on:{\"click\":_vm._pulish}},[_vm._v(\"发布\")])],1)]),_vm._v(\" \"),_c('div',{staticClass:\"edit-wrapper\"},[_c('cube-textarea',{attrs:{\"placeholder\":_vm.placeholder,\"maxlength\":_vm.maxlength,\"autofocus\":_vm.autofocus},model:{value:(_vm.feelling),callback:function ($$v) {_vm.feelling=$$v},expression:\"feelling\"}})],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-1cdcc068\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/edit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1cdcc068\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./edit.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./edit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./edit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1cdcc068\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./edit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/edit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}